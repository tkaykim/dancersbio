# 프론트엔드 개발 명세서 (Frontend Development Specification) v2.1

## 1. 문서 개요 (Overview)
본 문서는 `dancers.bio` 플랫폼의 **사용자 권한 관리**, **화면별 UI 상태 분기**, **비즈니스 로직**을 정의한 통합 개발 지시서입니다. 
**v2.1 변경사항**: 엄격한 '모드 전환'을 제거하고, **동시 역할(Dual Roles)**을 수행할 수 있는 유연한 UI를 지향합니다.

---

## 2. 사용자 역할 및 권한 정의 (User Roles & Permissions)

사용자는 접속 시점에 따라 아래 5가지 상태 중 하나를 가집니다.

| 역할 (Role) | 정의 | 주요 권한 |
| :--- | :--- | :--- |
| **Guest (비로그인)** | 계정이 없는 단순 방문자. | 프로필 조회, 회원가입 유도(Viral) 노출. |
| **User (Integrated)** | 로그인한 모든 유저. **(댄서이자 클라이언트)** | **프로젝트 생성/제안**, **받은 제안 관리**, **내 프로필 수정**. |
| **Manager** | 특정 댄서의 관리 권한을 위임받은 계정. | 대리 수정, 스케줄 관리, 제안 1차 검토. |

> **핵심 원칙**: 댄서가 별도의 '클라이언트 모드'로 변경하지 않아도, 언제든 프로젝트를 만들고 제안을 보낼 수 있습니다.

---

## 3. 공통 UI 정책 (Global UI Policies)

### 3.1. 바이럴 트리거 (Viral Triggers)
**타겟**: Guest (비로그인) 유저.
*   **Header**: 스크롤 시 상단에 "댄서라면? 포트폴리오 만들기" 버튼 노출.
*   **Footer**: 모든 페이지 최하단에 "무료로 시작하기" 고정 배너 배치.

### 3.2. 통합 대시보드 (Unified Dashboard)
모드 변경 없이 **'받은 일'**과 **'보낸 일'**을 한눈에 관리합니다.

### 3.3. 온보딩 및 소유권 주장 (`/onboarding/claim` & `/create`)

| 단계 | Guest | Logged-in User |
| :--- | :--- | :--- |
| **진입 시** | 로그인/회원가입 먼저 유도 | 바로 위저드 진입 |
| **관심사 설정** | - | **활동 영역(Specialty)** 및 **주 장르(Genre)** 태그 선택 (다중 선택 가능) |
| **인증 방식** | 인스타그램 OAuth / 이메일 가입 | 인스타그램 연동 / 신분증 업로드 |
| **완료 후** | "가입 대기 중" 상태로 대시보드 이동 | "승인 대기 중" 배지 부여 후 기존 대시보드 리다이렉트 |

> **Specialty & Genre Examples**:
> *   **Specialty**: 안무제작, 음악방송, 뮤직비디오, 댄스 배틀, 심사 등.
> *   **Genre**: 코레오, 힙합, 팝핑, 락킹, 왁킹, 보깅, 크럼프, 브레이킹, 힐댄스 등.

---

## 4. 페이지별 상세 명세 (Page-Specific Specifications)

### 4.1. 댄서 프로필 페이지 (`/profile/[id]`)

| UI 컴포넌트 | Guest | User (Me) | User (Other) | 비고 |
| :--- | :--- | :--- | :--- | :--- |
| **주인 찾기 배너** | **[노출]** | (해당 없음) | **[노출]** | `owner_id`가 없는 경우. |
| **상단 액션 버튼** | [팔로우] | **[프로필 수정]** | **[제안하기]** + [팔로우] | 타인에게는 즉시 제안 가능. |
| **포트폴리오 카드** | 조회 가능 | **[수정 핸들]** | 조회 가능 | |

> **제안하기 Flow**: "클라이언트 모드" 전환 필요 없음. 클릭 시 바로 **"내 프로젝트 선택/생성 -> 제안 발송"** 모달이 뜹니다.

### 4.2. 통합 대시보드 (`/dashboard`)
'댄서 모드', '클라이언트 모드' 분리 없이 탭으로 통합 관리합니다.

*   **Tab 1: 내 활동 (Overview)**
    *   내 프로필 상태, 최근 알림, 내 일정 요약.
*   **Tab 2: 받은 제안 (Inbox) - "As Talent"**
    *   나에게 들어온 섭외 요청 리스트 (`Pending`, `Accepted`).
    *   수락/거절 액션 수행.
*   **Tab 3: 보낸 제안 (Outbox) - "As Client"**
    *   내가 생성한 **프로젝트(Project)** 리스트.
    *   각 프로젝트별 섭외 현황 및 발송한 제안 상태 확인.

### 4.3. 프로젝트 및 제안서 작성 (`/proposal/[id]`)

*   **진입 시나리오**: 댄서 A가 댄서 B의 프로필에서 [제안하기] 클릭.
*   **Identity Check**:
    *   "누구의 자격으로 제안하시나요?" (1. 내 개인 프로필 / 2. 내 소속 팀 / 3. 비즈니스 프로필) 선택 가능.
    *   별도 회원가입 없이, 현재 계정 정보로 즉시 발송 가능.

### 4.4. 클라이언트 포털 (`client.*` 서브도메인 → `/client`)

*   **목적**: 보낸 제안을 PC에서 한눈에 관리하기 위한 전용 뷰. 클라이언트(제안 발신자)가 프로젝트별 댄서 응답 현황을 확인.
*   **접근**: `client.dancersbio-vercel.app` 접속 시 동일 앱의 `/client` 경로로 rewrite. 기존 Supabase Auth 로그인 사용(별도 계정 없음).
*   **페이지**:
    *   `/client`: 대시보드 — 내가 오너인 프로젝트 목록, 프로젝트별 제안 수·상태 요약(수락/대기/거절/협상).
    *   `/client/projects/[id]`: 프로젝트 상세 — 해당 프로젝트의 댄서별 제안 테이블(댄서명, 역할, 금액, 상태, 보낸 일시).
    *   `/client/onboarding`: 회사 정보 등록(선택). 등록 시 제안 발송 시 회사 명의로 보낼 수 있음.
*   **정책**: CLIENT(회사) 프로필은 필수 아님. 개인/팀 자격으로만 제안해도 포털 이용 가능. 회사 정보는 선택 등록.

---

## 5. 핵심 비즈니스 로직 (Core Logic & Helpers)

### 5.1. 제안 발송 권한 (Sub-contracting Logic)
```typescript
/**
* 제안 발송 시 발신자 정보(Identity)를 결정합니다.
*/
function getSenderIdentity(user) {
  // 사용자가 가진 모든 '발신 가능한 자격'을 리턴
  return [
    { type: 'personal', name: user.name, id: user.id }, // 개인 댄서 자격
    ...user.teams.map(team => ({ type: 'team', name: team.name, id: team.id })), // 팀 리더 자격
    ...user.clients.map(client => ({ type: 'business', name: client.name, id: client.id })) // 등록된 사업자 자격
  ];
}
```

본 명세서는 **"유연한 역할 수행(Fluid Roles)"**을 지향하는 프론트엔드 동작 기준입니다.
